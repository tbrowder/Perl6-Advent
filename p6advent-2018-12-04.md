# Christmas in NQP Land: New Pod Features for the New Year

A tale of Santa's helpers hacking the Rakudo compiler to fill a repo
branch with goodies for the New Year.

## Introduction

Rakudo NQP files contain the code that parses a Perl 6 input file and
transforms it into a running Perl 6 program. This article will
highlight some details learned by experience in an attempt to modify
Rakudo NQP files to implement some not-yet-implemented (NYI) Perl 6
POD features.

Note that NQP is not intended to be used as a final language and is
not guaranteed to remain constant, so users should be wary about
relying on any current features.

## Preparation

The NQP files are kept in a git repository at
[https://github.com/rakudo/rakudo/src/Perl6/](https://github.com/rakudo/rakudo/src/Perl6/). See
my 2017 Perl 6 Advent entry at
[https://perl6advent.wordpress.com/2017/12/08/](https://perl6advent.wordpress.com/2017/12/08/)
for more background on my development setup and work flow.

## Background

Following is a list of POD features that I know are not yet
implemented:

1. NYI: %config :numbered aliasing with '#' for paragraph or delimited
   blocks

2. NYI: pod data blocks

3. NYI: formatting code in defn block terms

4. NYI: formatting code in table cells

5. NYI: pod configuration aliasing

6. NYI: formatting code in declarator blocks (not described in S26, but a user-requested feature)

7. NYI: consistent use of the Pod::Block::Para as the leaf parent of all regular text

8. NYI: pod configuration lines

9. NYI: Pod::Ambient class

10. NYI: nested delimited comment blocks

11. NYI: configuration data on continuation lines are not always
    handled correctly

The missing items are described in the beautifully-crafted
[Synopsis S26](https://design.perl6.org/S26.html) written by
Dr. Damian Conway, Larry Wallâ€™s prolific right-hand
man-about-the-world Perl expert and renowned Perl author. (Note that
few people are actively working on POD now and my list of NYI features
may be incomplete. S26 is very tightly written and not easy to for me
to understand without intense concentration. I spent quite a few
wasted hours attempting to implement a feature that I thought was
described but I misread the document!)

```
```

## Rakudo NQP grammar and actions exploration

During my work on implementing NYI POD features, I've added notes to a
document I've added to the Rakudo repository:
[rakudo/docs/rakudo-nqp-and-pod-notes.md](https://github.com/rakudo/rakudo/blob/master/docs/rakudo-nqp-and-pod-notes.md). I
update it as I find out new things that may not be documented or whose
documentation may not be easily found.


### Assertions

### Unknown failures

  example error

### Debugging

### Dynamic variables

### Match objects

match object retains child data

### Make, made, and ast

make, ast, etc.
$/.ast := something
unless overwritten


grammar vs actions
qast nodes
internal documentation

future
optimization
benchmarking?
